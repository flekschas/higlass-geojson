!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["higlass-geojson"]=t():n["higlass-geojson"]=t()}(window,function(){return function(n){var t={};function r(i){if(t[i])return t[i].exports;var e=t[i]={i:i,l:!1,exports:{}};return n[i].call(e.exports,e,e.exports,r),e.l=!0,e.exports}return r.m=n,r.c=t,r.d=function(n,t,i){r.o(n,t)||Object.defineProperty(n,t,{configurable:!1,enumerable:!0,get:i})},r.r=function(n){Object.defineProperty(n,"__esModule",{value:!0})},r.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return r.d(t,"a",t),t},r.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},r.p="",r(r.s=0)}([function(n,t,r){"use strict";r.r(t),window.higlassTracks=window.higlassTracks||{},window.higlassTracksByType=window.higlassTracksByType||{};var i=n=>{window.higlassTracks[n.name]=n,window.higlassTracksByType[n.config.type]=n},e=function(){return new o};function o(){this.reset()}o.prototype={constructor:o,reset:function(){this.s=this.t=0},add:function(n){a(u,n,this.t),a(this,u.s,this.s),this.s?this.t+=u.t:this.s=u.t},valueOf:function(){return this.s}};var u=new o;function a(n,t,r){var i=n.s=t+r,e=i-t,o=i-e;n.t=t-o+(r-e)}var l=1e-6,c=Math.PI,f=c/2,s=c/4,p=2*c,h=180/c,v=c/180,d=Math.abs,g=Math.atan,y=Math.atan2,S=Math.cos,m=(Math.ceil,Math.exp),w=(Math.floor,Math.log),E=(Math.pow,Math.sin),_=(Math.sign,Math.sqrt),x=Math.tan;function M(n){return n>1?0:n<-1?c:Math.acos(n)}function k(n){return n>1?f:n<-1?-f:Math.asin(n)}function b(){}function P(n,t){n&&z.hasOwnProperty(n.type)&&z[n.type](n,t)}var j={Feature:function(n,t){P(n.geometry,t)},FeatureCollection:function(n,t){for(var r=n.features,i=-1,e=r.length;++i<e;)P(r[i].geometry,t)}},z={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var r=n.coordinates,i=-1,e=r.length;++i<e;)n=r[i],t.point(n[0],n[1],n[2])},LineString:function(n,t){N(n.coordinates,t,0)},MultiLineString:function(n,t){for(var r=n.coordinates,i=-1,e=r.length;++i<e;)N(r[i],t,0)},Polygon:function(n,t){O(n.coordinates,t)},MultiPolygon:function(n,t){for(var r=n.coordinates,i=-1,e=r.length;++i<e;)O(r[i],t)},GeometryCollection:function(n,t){for(var r=n.geometries,i=-1,e=r.length;++i<e;)P(r[i],t)}};function N(n,t,r){var i,e=-1,o=n.length-r;for(t.lineStart();++e<o;)i=n[e],t.point(i[0],i[1],i[2]);t.lineEnd()}function O(n,t){var r=-1,i=n.length;for(t.polygonStart();++r<i;)N(n[r],t,1);t.polygonEnd()}var C=function(n,t){n&&j.hasOwnProperty(n.type)?j[n.type](n,t):P(n,t)};e(),e();function T(n){return[y(n[1],n[0]),k(n[2])]}function B(n){var t=n[0],r=n[1],i=S(r);return[i*S(t),i*E(t),E(r)]}function q(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function A(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function D(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function F(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function L(n){var t=_(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}e();var R=function(n,t){function r(r,i){return r=n(r,i),t(r[0],r[1])}return n.invert&&t.invert&&(r.invert=function(r,i){return(r=t.invert(r,i))&&n.invert(r[0],r[1])}),r};function H(n,t){return[n>c?n-p:n<-c?n+p:n,t]}function G(n,t,r){return(n%=p)?t||r?R(W(n),I(t,r)):W(n):t||r?I(t,r):H}function U(n){return function(t,r){return[(t+=n)>c?t-p:t<-c?t+p:t,r]}}function W(n){var t=U(n);return t.invert=U(-n),t}function I(n,t){var r=S(n),i=E(n),e=S(t),o=E(t);function u(n,t){var u=S(t),a=S(n)*u,l=E(n)*u,c=E(t),f=c*r+a*i;return[y(l*e-f*o,a*r-c*i),k(f*e+l*o)]}return u.invert=function(n,t){var u=S(t),a=S(n)*u,l=E(n)*u,c=E(t),f=c*e-l*o;return[y(l*e+c*o,a*r+f*i),k(f*r-a*i)]},u}H.invert=H;var J=function(n){function t(t){return(t=n(t[0]*v,t[1]*v))[0]*=h,t[1]*=h,t}return n=G(n[0]*v,n[1]*v,n.length>2?n[2]*v:0),t.invert=function(t){return(t=n.invert(t[0]*v,t[1]*v))[0]*=h,t[1]*=h,t},t};function V(n,t,r,i,e,o){if(r){var u=S(t),a=E(t),l=i*r;null==e?(e=t+i*p,o=t-l/2):(e=Z(u,e),o=Z(u,o),(i>0?e<o:e>o)&&(e+=i*p));for(var c,f=e;i>0?f>o:f<o;f-=l)c=T([u,-a*S(f),-a*E(f)]),n.point(c[0],c[1])}}function Z(n,t){(t=B(t))[0]-=n,L(t);var r=M(-t[1]);return((-t[2]<0?-r:r)+p-l)%p}var K=function(){var n,t=[];return{point:function(t,r){n.push([t,r])},lineStart:function(){t.push(n=[])},lineEnd:b,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var r=t;return t=[],n=null,r}}},Q=function(n,t){return d(n[0]-t[0])<l&&d(n[1]-t[1])<l};function X(n,t,r,i){this.x=n,this.z=t,this.o=r,this.e=i,this.v=!1,this.n=this.p=null}var Y=function(n,t,r,i,e){var o,u,a=[],l=[];if(n.forEach(function(n){if(!((t=n.length-1)<=0)){var t,r,i=n[0],u=n[t];if(Q(i,u)){for(e.lineStart(),o=0;o<t;++o)e.point((i=n[o])[0],i[1]);e.lineEnd()}else a.push(r=new X(i,n,null,!0)),l.push(r.o=new X(i,null,r,!1)),a.push(r=new X(u,n,null,!1)),l.push(r.o=new X(u,null,r,!0))}}),a.length){for(l.sort(t),$(a),$(l),o=0,u=l.length;o<u;++o)l[o].e=r=!r;for(var c,f,s=a[0];;){for(var p=s,h=!0;p.v;)if((p=p.n)===s)return;c=p.z,e.lineStart();do{if(p.v=p.o.v=!0,p.e){if(h)for(o=0,u=c.length;o<u;++o)e.point((f=c[o])[0],f[1]);else i(p.x,p.n.x,1,e);p=p.n}else{if(h)for(c=p.p.z,o=c.length-1;o>=0;--o)e.point((f=c[o])[0],f[1]);else i(p.x,p.p.x,-1,e);p=p.p}c=(p=p.o).z,h=!h}while(!p.v);e.lineEnd()}}};function $(n){if(t=n.length){for(var t,r,i=0,e=n[0];++i<t;)e.n=r=n[i],r.p=e,e=r;e.n=r=n[0],r.p=e}}var nn=e(),tn=function(n,t){var r=t[0],i=t[1],e=E(i),o=[E(r),-S(r),0],u=0,a=0;nn.reset(),1===e?i=f+l:-1===e&&(i=-f-l);for(var h=0,v=n.length;h<v;++h)if(g=(d=n[h]).length)for(var d,g,m=d[g-1],w=m[0],_=m[1]/2+s,x=E(_),M=S(_),b=0;b<g;++b,w=j,x=N,M=O,m=P){var P=d[b],j=P[0],z=P[1]/2+s,N=E(z),O=S(z),C=j-w,T=C>=0?1:-1,q=T*C,D=q>c,F=x*N;if(nn.add(y(F*T*E(q),M*O+F*S(q))),u+=D?C+T*p:C,D^w>=r^j>=r){var R=A(B(m),B(P));L(R);var H=A(o,R);L(H);var G=(D^C>=0?-1:1)*k(H[2]);(i>G||i===G&&(R[0]||R[1]))&&(a+=D^C>=0?1:-1)}}return(u<-l||u<l&&nn<-l)^1&a},rn=function(n,t){return n<t?-1:n>t?1:n>=t?0:NaN};var en,on;1===(en=rn).length&&(on=en,en=function(n,t){return rn(on(n),t)});var un=Array.prototype;un.slice,un.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);var an=function(n){for(var t,r,i,e=n.length,o=-1,u=0;++o<e;)u+=n[o].length;for(r=new Array(u);--e>=0;)for(t=(i=n[e]).length;--t>=0;)r[--u]=i[t];return r};var ln=function(n,t,r,i){return function(e){var o,u,a,l=t(e),c=K(),f=t(c),s=!1,p={point:h,lineStart:d,lineEnd:g,polygonStart:function(){p.point=y,p.lineStart=S,p.lineEnd=m,u=[],o=[]},polygonEnd:function(){p.point=h,p.lineStart=d,p.lineEnd=g,u=an(u);var n=tn(o,i);u.length?(s||(e.polygonStart(),s=!0),Y(u,fn,n,r,e)):n&&(s||(e.polygonStart(),s=!0),e.lineStart(),r(null,null,1,e),e.lineEnd()),s&&(e.polygonEnd(),s=!1),u=o=null},sphere:function(){e.polygonStart(),e.lineStart(),r(null,null,1,e),e.lineEnd(),e.polygonEnd()}};function h(t,r){n(t,r)&&e.point(t,r)}function v(n,t){l.point(n,t)}function d(){p.point=v,l.lineStart()}function g(){p.point=h,l.lineEnd()}function y(n,t){a.push([n,t]),f.point(n,t)}function S(){f.lineStart(),a=[]}function m(){y(a[0][0],a[0][1]),f.lineEnd();var n,t,r,i,l=f.clean(),p=c.result(),h=p.length;if(a.pop(),o.push(a),a=null,h)if(1&l){if((t=(r=p[0]).length-1)>0){for(s||(e.polygonStart(),s=!0),e.lineStart(),n=0;n<t;++n)e.point((i=r[n])[0],i[1]);e.lineEnd()}}else h>1&&2&l&&p.push(p.pop().concat(p.shift())),u.push(p.filter(cn))}return p}};function cn(n){return n.length>1}function fn(n,t){return((n=n.x)[0]<0?n[1]-f-l:f-n[1])-((t=t.x)[0]<0?t[1]-f-l:f-t[1])}var sn=ln(function(){return!0},function(n){var t,r=NaN,i=NaN,e=NaN;return{lineStart:function(){n.lineStart(),t=1},point:function(o,u){var a=o>0?c:-c,s=d(o-r);d(s-c)<l?(n.point(r,i=(i+u)/2>0?f:-f),n.point(e,i),n.lineEnd(),n.lineStart(),n.point(a,i),n.point(o,i),t=0):e!==a&&s>=c&&(d(r-e)<l&&(r-=e*l),d(o-a)<l&&(o-=a*l),i=function(n,t,r,i){var e,o,u=E(n-r);return d(u)>l?g((E(t)*(o=S(i))*E(r)-E(i)*(e=S(t))*E(n))/(e*o*u)):(t+i)/2}(r,i,o,u),n.point(e,i),n.lineEnd(),n.lineStart(),n.point(a,i),t=0),n.point(r=o,i=u),e=a},lineEnd:function(){n.lineEnd(),r=i=NaN},clean:function(){return 2-t}}},function(n,t,r,i){var e;if(null==n)e=r*f,i.point(-c,e),i.point(0,e),i.point(c,e),i.point(c,0),i.point(c,-e),i.point(0,-e),i.point(-c,-e),i.point(-c,0),i.point(-c,e);else if(d(n[0]-t[0])>l){var o=n[0]<t[0]?c:-c;e=r*o/2,i.point(-o,e),i.point(0,e),i.point(o,e)}else i.point(t[0],t[1])},[-c,-f]);var pn=function(n){var t=S(n),r=6*v,i=t>0,e=d(t)>l;function o(n,r){return S(n)*S(r)>t}function u(n,r,i){var e=[1,0,0],o=A(B(n),B(r)),u=q(o,o),a=o[0],f=u-a*a;if(!f)return!i&&n;var s=t*u/f,p=-t*a/f,h=A(e,o),v=F(e,s);D(v,F(o,p));var g=h,y=q(v,g),S=q(g,g),m=y*y-S*(q(v,v)-1);if(!(m<0)){var w=_(m),E=F(g,(-y-w)/S);if(D(E,v),E=T(E),!i)return E;var x,M=n[0],k=r[0],b=n[1],P=r[1];k<M&&(x=M,M=k,k=x);var j=k-M,z=d(j-c)<l;if(!z&&P<b&&(x=b,b=P,P=x),z||j<l?z?b+P>0^E[1]<(d(E[0]-M)<l?b:P):b<=E[1]&&E[1]<=P:j>c^(M<=E[0]&&E[0]<=k)){var N=F(g,(-y+w)/S);return D(N,v),[E,T(N)]}}}function a(t,r){var e=i?n:c-n,o=0;return t<-e?o|=1:t>e&&(o|=2),r<-e?o|=4:r>e&&(o|=8),o}return ln(o,function(n){var t,r,f,s,p;return{lineStart:function(){s=f=!1,p=1},point:function(h,v){var d,g=[h,v],y=o(h,v),S=i?y?0:a(h,v):y?a(h+(h<0?c:-c),v):0;if(!t&&(s=f=y)&&n.lineStart(),y!==f&&(!(d=u(t,g))||Q(t,d)||Q(g,d))&&(g[0]+=l,g[1]+=l,y=o(g[0],g[1])),y!==f)p=0,y?(n.lineStart(),d=u(g,t),n.point(d[0],d[1])):(d=u(t,g),n.point(d[0],d[1]),n.lineEnd()),t=d;else if(e&&t&&i^y){var m;S&r||!(m=u(g,t,!0))||(p=0,i?(n.lineStart(),n.point(m[0][0],m[0][1]),n.point(m[1][0],m[1][1]),n.lineEnd()):(n.point(m[1][0],m[1][1]),n.lineEnd(),n.lineStart(),n.point(m[0][0],m[0][1])))}!y||t&&Q(t,g)||n.point(g[0],g[1]),t=g,f=y,r=S},lineEnd:function(){f&&n.lineEnd(),t=null},clean:function(){return p|(s&&f)<<1}}},function(t,i,e,o){V(o,n,r,e,t,i)},i?[0,-n]:[-c,n-c])},hn=function(n,t,r,i,e,o){var u,a=n[0],l=n[1],c=0,f=1,s=t[0]-a,p=t[1]-l;if(u=r-a,s||!(u>0)){if(u/=s,s<0){if(u<c)return;u<f&&(f=u)}else if(s>0){if(u>f)return;u>c&&(c=u)}if(u=e-a,s||!(u<0)){if(u/=s,s<0){if(u>f)return;u>c&&(c=u)}else if(s>0){if(u<c)return;u<f&&(f=u)}if(u=i-l,p||!(u>0)){if(u/=p,p<0){if(u<c)return;u<f&&(f=u)}else if(p>0){if(u>f)return;u>c&&(c=u)}if(u=o-l,p||!(u<0)){if(u/=p,p<0){if(u>f)return;u>c&&(c=u)}else if(p>0){if(u<c)return;u<f&&(f=u)}return c>0&&(n[0]=a+c*s,n[1]=l+c*p),f<1&&(t[0]=a+f*s,t[1]=l+f*p),!0}}}}},vn=1e9,dn=-vn;function gn(n,t,r,i){function e(e,o){return n<=e&&e<=r&&t<=o&&o<=i}function o(e,o,a,l){var f=0,s=0;if(null==e||(f=u(e,a))!==(s=u(o,a))||c(e,o)<0^a>0)do{l.point(0===f||3===f?n:r,f>1?i:t)}while((f=(f+a+4)%4)!==s);else l.point(o[0],o[1])}function u(i,e){return d(i[0]-n)<l?e>0?0:3:d(i[0]-r)<l?e>0?2:1:d(i[1]-t)<l?e>0?1:0:e>0?3:2}function a(n,t){return c(n.x,t.x)}function c(n,t){var r=u(n,1),i=u(t,1);return r!==i?r-i:0===r?t[1]-n[1]:1===r?n[0]-t[0]:2===r?n[1]-t[1]:t[0]-n[0]}return function(u){var l,c,f,s,p,h,v,d,g,y,S,m=u,w=K(),E={point:_,lineStart:function(){E.point=x,c&&c.push(f=[]);y=!0,g=!1,v=d=NaN},lineEnd:function(){l&&(x(s,p),h&&g&&w.rejoin(),l.push(w.result()));E.point=_,g&&m.lineEnd()},polygonStart:function(){m=w,l=[],c=[],S=!0},polygonEnd:function(){var t=function(){for(var t=0,r=0,e=c.length;r<e;++r)for(var o,u,a=c[r],l=1,f=a.length,s=a[0],p=s[0],h=s[1];l<f;++l)o=p,u=h,s=a[l],p=s[0],h=s[1],u<=i?h>i&&(p-o)*(i-u)>(h-u)*(n-o)&&++t:h<=i&&(p-o)*(i-u)<(h-u)*(n-o)&&--t;return t}(),r=S&&t,e=(l=an(l)).length;(r||e)&&(u.polygonStart(),r&&(u.lineStart(),o(null,null,1,u),u.lineEnd()),e&&Y(l,a,t,o,u),u.polygonEnd());m=u,l=c=f=null}};function _(n,t){e(n,t)&&m.point(n,t)}function x(o,u){var a=e(o,u);if(c&&f.push([o,u]),y)s=o,p=u,h=a,y=!1,a&&(m.lineStart(),m.point(o,u));else if(a&&g)m.point(o,u);else{var l=[v=Math.max(dn,Math.min(vn,v)),d=Math.max(dn,Math.min(vn,d))],w=[o=Math.max(dn,Math.min(vn,o)),u=Math.max(dn,Math.min(vn,u))];hn(l,w,n,t,r,i)?(g||(m.lineStart(),m.point(l[0],l[1])),m.point(w[0],w[1]),a||m.lineEnd(),S=!1):a&&(m.lineStart(),m.point(o,u),S=!1)}v=o,d=u,g=a}return E}}e();var yn=function(n){return n};e(),e();var Sn=1/0,mn=Sn,wn=-Sn,En=wn;var _n={point:function(n,t){n<Sn&&(Sn=n);n>wn&&(wn=n);t<mn&&(mn=t);t>En&&(En=t)},lineStart:b,lineEnd:b,polygonStart:b,polygonEnd:b,result:function(){var n=[[Sn,mn],[wn,En]];return wn=En=-(mn=Sn=1/0),n}};function xn(n){this._context=n}xn.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(n,t){switch(this._point){case 0:this._context.moveTo(n,t),this._point=1;break;case 1:this._context.lineTo(n,t);break;default:this._context.moveTo(n+this._radius,t),this._context.arc(n,t,this._radius,0,p)}},result:b};e();function Mn(){this._string=[]}function kn(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}Mn.prototype={_radius:4.5,_circle:kn(4.5),pointRadius:function(n){return(n=+n)!==this._radius&&(this._radius=n,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(n,t){switch(this._point){case 0:this._string.push("M",n,",",t),this._point=1;break;case 1:this._string.push("L",n,",",t);break;default:null==this._circle&&(this._circle=kn(this._radius)),this._string.push("M",n,",",t,this._circle)}},result:function(){if(this._string.length){var n=this._string.join("");return this._string=[],n}return null}};function bn(n){return function(t){var r=new Pn;for(var i in n)r[i]=n[i];return r.stream=t,r}}function Pn(){}function jn(n,t,r){var i=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),null!=i&&n.clipExtent(null),C(r,n.stream(_n)),t(_n.result()),null!=i&&n.clipExtent(i),n}function zn(n,t,r){return jn(n,function(r){var i=t[1][0]-t[0][0],e=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),e/(r[1][1]-r[0][1])),u=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,a=+t[0][1]+(e-o*(r[1][1]+r[0][1]))/2;n.scale(150*o).translate([u,a])},r)}function Nn(n,t,r){return zn(n,[[0,0],t],r)}function On(n,t,r){return jn(n,function(r){var i=+t,e=i/(r[1][0]-r[0][0]),o=(i-e*(r[1][0]+r[0][0]))/2,u=-e*r[0][1];n.scale(150*e).translate([o,u])},r)}function Cn(n,t,r){return jn(n,function(r){var i=+t,e=i/(r[1][1]-r[0][1]),o=-e*r[0][0],u=(i-e*(r[1][1]+r[0][1]))/2;n.scale(150*e).translate([o,u])},r)}Pn.prototype={constructor:Pn,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Tn=16,Bn=S(30*v),qn=function(n,t){return+t?function(n,t){function r(i,e,o,u,a,c,f,s,p,h,v,g,S,m){var w=f-i,E=s-e,x=w*w+E*E;if(x>4*t&&S--){var M=u+h,b=a+v,P=c+g,j=_(M*M+b*b+P*P),z=k(P/=j),N=d(d(P)-1)<l||d(o-p)<l?(o+p)/2:y(b,M),O=n(N,z),C=O[0],T=O[1],B=C-i,q=T-e,A=E*B-w*q;(A*A/x>t||d((w*B+E*q)/x-.5)>.3||u*h+a*v+c*g<Bn)&&(r(i,e,o,u,a,c,C,T,N,M/=j,b/=j,P,S,m),m.point(C,T),r(C,T,N,M,b,P,f,s,p,h,v,g,S,m))}}return function(t){var i,e,o,u,a,l,c,f,s,p,h,v,d={point:g,lineStart:y,lineEnd:m,polygonStart:function(){t.polygonStart(),d.lineStart=w},polygonEnd:function(){t.polygonEnd(),d.lineStart=y}};function g(r,i){r=n(r,i),t.point(r[0],r[1])}function y(){f=NaN,d.point=S,t.lineStart()}function S(i,e){var o=B([i,e]),u=n(i,e);r(f,s,c,p,h,v,f=u[0],s=u[1],c=i,p=o[0],h=o[1],v=o[2],Tn,t),t.point(f,s)}function m(){d.point=g,t.lineEnd()}function w(){y(),d.point=E,d.lineEnd=_}function E(n,t){S(i=n,t),e=f,o=s,u=p,a=h,l=v,d.point=S}function _(){r(f,s,c,p,h,v,e,o,i,u,a,l,Tn,t),d.lineEnd=m,m()}return d}}(n,t):function(n){return bn({point:function(t,r){t=n(t,r),this.stream.point(t[0],t[1])}})}(n)};var An=bn({point:function(n,t){this.stream.point(n*v,t*v)}});function Dn(n,t,r,i){var e=S(i),o=E(i),u=e*n,a=o*n,l=e/n,c=o/n,f=(o*r-e*t)/n,s=(o*t+e*r)/n;function p(n,i){return[u*n-a*i+t,r-a*n-u*i]}return p.invert=function(n,t){return[l*n-c*t+f,s-c*n-l*t]},p}function Fn(n){return Ln(function(){return n})()}function Ln(n){var t,r,i,e,o,u,a,l,c,f,s=150,p=480,d=250,g=0,y=0,S=0,m=0,w=0,E=0,x=null,M=sn,k=null,b=yn,P=.5;function j(n){return l(n[0]*v,n[1]*v)}function z(n){return(n=l.invert(n[0],n[1]))&&[n[0]*h,n[1]*h]}function N(){var n=Dn(s,0,0,E).apply(null,t(g,y)),i=(E?Dn:function(n,t,r){function i(i,e){return[t+n*i,r-n*e]}return i.invert=function(i,e){return[(i-t)/n,(r-e)/n]},i})(s,p-n[0],d-n[1],E);return r=G(S,m,w),a=R(t,i),l=R(r,a),u=qn(a,P),O()}function O(){return c=f=null,j}return j.stream=function(n){return c&&f===n?c:c=An(function(n){return bn({point:function(t,r){var i=n(t,r);return this.stream.point(i[0],i[1])}})}(r)(M(u(b(f=n)))))},j.preclip=function(n){return arguments.length?(M=n,x=void 0,O()):M},j.postclip=function(n){return arguments.length?(b=n,k=i=e=o=null,O()):b},j.clipAngle=function(n){return arguments.length?(M=+n?pn(x=n*v):(x=null,sn),O()):x*h},j.clipExtent=function(n){return arguments.length?(b=null==n?(k=i=e=o=null,yn):gn(k=+n[0][0],i=+n[0][1],e=+n[1][0],o=+n[1][1]),O()):null==k?null:[[k,i],[e,o]]},j.scale=function(n){return arguments.length?(s=+n,N()):s},j.translate=function(n){return arguments.length?(p=+n[0],d=+n[1],N()):[p,d]},j.center=function(n){return arguments.length?(g=n[0]%360*v,y=n[1]%360*v,N()):[g*h,y*h]},j.rotate=function(n){return arguments.length?(S=n[0]%360*v,m=n[1]%360*v,w=n.length>2?n[2]%360*v:0,N()):[S*h,m*h,w*h]},j.angle=function(n){return arguments.length?(E=n%360*v,N()):E*h},j.precision=function(n){return arguments.length?(u=qn(a,P=n*n),O()):_(P)},j.fitExtent=function(n,t){return zn(j,n,t)},j.fitSize=function(n,t){return Nn(j,n,t)},j.fitWidth=function(n,t){return On(j,n,t)},j.fitHeight=function(n,t){return Cn(j,n,t)},function(){return t=n.apply(this,arguments),j.invert=t.invert&&z,N()}}function Rn(n){return function(t,r){var i=S(t),e=S(r),o=n(i*e);return[o*e*E(t),o*E(r)]}}function Hn(n){return function(t,r){var i=_(t*t+r*r),e=n(i),o=E(e),u=S(e);return[y(t*o,i*u),k(i&&r*o/i)]}}var Gn=Rn(function(n){return _(2/(1+n))});Gn.invert=Hn(function(n){return 2*k(n/2)});var Un=Rn(function(n){return(n=M(n))&&n/E(n)});Un.invert=Hn(function(n){return n});function Wn(n,t){return[n,w(x((f+t)/2))]}Wn.invert=function(n,t){return[n,2*g(m(t))-f]};var In=function(){return Jn(Wn).scale(961/p)};function Jn(n){var t,r,i,e=Fn(n),o=e.center,u=e.scale,a=e.translate,l=e.clipExtent,f=null;function s(){var o=c*u(),a=e(J(e.rotate()).invert([0,0]));return l(null==f?[[a[0]-o,a[1]-o],[a[0]+o,a[1]+o]]:n===Wn?[[Math.max(a[0]-o,f),t],[Math.min(a[0]+o,r),i]]:[[f,Math.max(a[1]-o,t)],[r,Math.min(a[1]+o,i)]])}return e.scale=function(n){return arguments.length?(u(n),s()):u()},e.translate=function(n){return arguments.length?(a(n),s()):a()},e.center=function(n){return arguments.length?(o(n),s()):o()},e.clipExtent=function(n){return arguments.length?(null==n?f=t=r=i=null:(f=+n[0][0],t=+n[0][1],r=+n[1][0],i=+n[1][1]),s()):null==f?null:[[f,t],[r,i]]},s()}function Vn(n,t){return[n,t]}Vn.invert=Vn;function Zn(n,t){var r=S(t),i=S(n)*r;return[r*E(n)/i,E(t)/i]}Zn.invert=Hn(g);function Kn(n,t){var r=t*t,i=r*r;return[n*(.8707-.131979*r+i*(i*(.003971*r-.001529*i)-.013791)),t*(1.007226+r*(.015085+i*(.028874*r-.044475-.005916*i)))]}Kn.invert=function(n,t){var r,i=t,e=25;do{var o=i*i,u=o*o;i-=r=(i*(1.007226+o*(.015085+u*(.028874*o-.044475-.005916*u)))-t)/(1.007226+o*(.045255+u*(.259866*o-.311325-.005916*11*u)))}while(d(r)>l&&--e>0);return[n/(.8707+(o=i*i)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),i]};function Qn(n,t){return[S(t)*E(n),E(t)]}Qn.invert=Hn(k);function Xn(n,t){var r=S(t),i=1+S(n)*r;return[r*E(n)/i,E(t)/i]}Xn.invert=Hn(function(n){return 2*g(n)});function Yn(n,t){return[w(x((f+t)/2)),-n]}Yn.invert=function(n,t){return[-t,2*g(m(n))-f]};var $n=function(){function n(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}return function(t,r,i){return r&&n(t.prototype,r),i&&n(t,i),t}}();var nt=function(n){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];if(!new.target)throw new Error('Uncaught TypeError: Class constructor cannot be invoked without "new"');var e=function(t){function r(n,t,i,e,o){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var u=function(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,n,i,e,t.options,o));switch(u.options.projection){case"mercator":default:u.projection=In()}return u.updateProjection(),u}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}(r,n.tracks.Annotations2dTrack),$n(r,[{key:"prepAnnotation",value:function(n,t,r,i,e,o,u){return{graphics:n,uid:t,annotation:{x:r,y:i,width:e,height:o,geometry:u.geometry},dataPos:[u.xStart,u.xEnd,u.yStart,u.yEnd],importance:u.importance,info:u.properties}}},{key:"drawAnnotation",value:function(n){var t=n.graphics,r=n.uid,i=n.annotation,e=n.dataPos,o=n.importance,u=n.info;if((i.width<this.options.polygonMinBoundingSize||i.height<this.options.polygonMinBoundingSize)&&(i.geometry.type="rect"),this.options.minSquareSize&&(i.width<this.options.minSquareSize||i.height<this.options.minSquareSize)){var a=this.options.minSquareSize/2;i.x-=a,i.y-=a,i.width=this.options.minSquareSize,i.height=this.options.minSquareSize}switch(i.geometry.type){case"Polygon":this.drawPolygon(t,i.geometry.coordinates);break;default:this.drawRect(t,i.x,i.y,i.width,i.height)}this.publish("annotationDrawn",{trackUuids:this.uuid,annotationUuid:r,viewPos:[i.x,i.y,i.width,i.height],dataPos:e,importance:o,info:u}),this.drawnAnnotations[r]=i}},{key:"drawRect",value:function(n,t,r,i,e){n.drawRect(t,r,i,e)}},{key:"drawPolygon",value:function(n,t){var r=this,i=t.map(function(n){return n.reduce(function(n,t){return n.concat(r.projection(t))},[])});n.drawPolygon(i.shift()),i.forEach(function(t){n.drawPolygon(t),n.addHole(t)}),i.forEach(function(t){n.endFill(),n.drawPolygon(t)}),this.setFill(n)}},{key:"updateProjection",value:function(){this.projection.scale((this._xScale(180)-this._xScale(-180))/2/Math.PI).translate([this._xScale(0),this._yScale(0)])}},{key:"zoomed",value:function(n,t){this.xScale(n),this.yScale(t),this.updateProjection(),this.refreshTiles(),this.draw()}}]),r}();return new(Function.prototype.bind.apply(e,[null].concat(r)))};i({name:"GeoJsonTrack",track:nt,config:nt.config={type:"geo-json",datatype:["geo-json"],orientation:"2d",name:"GeoJSON",thumbnail:(new DOMParser).parseFromString('<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="1.5"><path d="M4 2.1L.5 3.5v12l5-2 5 2 5-2v-12l-5 2-3.17-1.268" fill="none" stroke="currentColor"/><path d="M10.5 3.5v12" fill="none" stroke="currentColor" stroke-opacity=".33" stroke-dasharray="1,2,0,0"/><path d="M5.5 13.5V6" fill="none" stroke="currentColor" stroke-opacity=".33" stroke-width=".9969299999999999" stroke-dasharray="1.71,3.43,0,0"/><path d="M9.03 5l.053.003.054.006.054.008.054.012.052.015.052.017.05.02.05.024 4 2 .048.026.048.03.046.03.044.034.042.037.04.04.037.04.036.042.032.045.03.047.028.048.025.05.022.05.02.053.016.053.014.055.01.055.007.055.005.055v.056l-.002.056-.005.055-.008.055-.01.055-.015.054-.017.054-.02.052-.023.05-.026.05-.028.048-.03.046-.035.044-.035.043-.038.04-4 4-.04.037-.04.036-.044.032-.045.03-.046.03-.048.024-.05.023-.05.02-.052.016-.052.015-.053.012-.054.01-.054.005-.055.003H8.97l-.053-.003-.054-.006-.054-.008-.054-.012-.052-.015-.052-.017-.05-.02-.05-.024-4-2-.048-.026-.048-.03-.046-.03-.044-.034-.042-.037-.04-.04-.037-.04-.036-.042-.032-.045-.03-.047-.028-.048-.025-.05-.022-.05-.02-.053-.016-.053-.014-.055-.01-.055-.007-.055L4 10.05v-.056l.002-.056.005-.055.008-.055.01-.055.015-.054.017-.054.02-.052.023-.05.026-.05.028-.048.03-.046.035-.044.035-.043.038-.04 4-4 .04-.037.04-.036.044-.032.045-.03.046-.03.048-.024.05-.023.05-.02.052-.016.052-.015.053-.012.054-.01.054-.005L8.976 5h.054zM5 10l4 2 4-4-4-2-4 4z" fill="currentColor"/><path d="M7.124 0C7.884 0 8.5.616 8.5 1.376v3.748c0 .76-.616 1.376-1.376 1.376H3.876c-.76 0-1.376-.616-1.376-1.376V1.376C2.5.616 3.116 0 3.876 0h3.248zm.56 5.295L5.965 1H5.05L3.375 5.295h.92l.354-.976h1.716l.375.975h.945zm-1.596-1.7l-.592-1.593-.58 1.594h1.172z" fill="currentColor"/></svg>',"text/xml").documentElement,availableOptions:["projecton","labelPosition","labelColor","labelTextOpacity","labelBackgroundOpacity","trackBorderWidth","trackBorderColor","rectangleDomainFillColor","rectangleDomainStrokeColor","rectangleDomainOpacity","rectanlgeMinSize","polygonMinBoundingSize"],defaultOptions:{projecton:"mercator",labelColor:"black",labelPosition:"hidden",trackBorderWidth:0,trackBorderColor:"black",rectangleDomainFillColor:"grey",rectangleDomainStrokeColor:"black",rectangleDomainOpacity:.6,rectanlgeMinSize:1,polygonMinBoundingSize:4}}})}])});