!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.hgGeoJson=t():n.hgGeoJson=t()}(window,function(){return function(n){var t={};function r(e){if(t[e])return t[e].exports;var i=t[e]={i:e,l:!1,exports:{}};return n[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=n,r.c=t,r.d=function(n,t,e){r.o(n,t)||Object.defineProperty(n,t,{configurable:!1,enumerable:!0,get:e})},r.r=function(n){Object.defineProperty(n,"__esModule",{value:!0})},r.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return r.d(t,"a",t),t},r.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},r.p="",r(r.s=4)}([function(n,t,r){"use strict";r.r(t);var e=function(){return new i};function i(){this.reset()}i.prototype={constructor:i,reset:function(){this.s=this.t=0},add:function(n){u(o,n,this.t),u(this,o.s,this.s),this.s?this.t+=o.t:this.s=o.t},valueOf:function(){return this.s}};var o=new i;function u(n,t,r){var e=n.s=t+r,i=e-t,o=e-i;n.t=t-o+(r-i)}var a=1e-6,c=Math.PI,l=c/2,f=c/4,s=2*c,p=180/c,h=c/180,d=Math.abs,g=Math.atan,v=Math.atan2,y=Math.cos,S=Math.ceil,E=Math.exp,m=(Math.floor,Math.log),w=Math.pow,M=Math.sin,x=Math.sign||function(n){return n>0?1:n<0?-1:0},_=Math.sqrt,b=Math.tan;function P(n){return n>1?0:n<-1?c:Math.acos(n)}function N(n){return n>1?l:n<-1?-l:Math.asin(n)}function j(n){return(n=M(n/2))*n}function k(){}function C(n,t){n&&A.hasOwnProperty(n.type)&&A[n.type](n,t)}var O={Feature:function(n,t){C(n.geometry,t)},FeatureCollection:function(n,t){for(var r=n.features,e=-1,i=r.length;++e<i;)C(r[e].geometry,t)}},A={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var r=n.coordinates,e=-1,i=r.length;++e<i;)n=r[e],t.point(n[0],n[1],n[2])},LineString:function(n,t){z(n.coordinates,t,0)},MultiLineString:function(n,t){for(var r=n.coordinates,e=-1,i=r.length;++e<i;)z(r[e],t,0)},Polygon:function(n,t){R(n.coordinates,t)},MultiPolygon:function(n,t){for(var r=n.coordinates,e=-1,i=r.length;++e<i;)R(r[e],t)},GeometryCollection:function(n,t){for(var r=n.geometries,e=-1,i=r.length;++e<i;)C(r[e],t)}};function z(n,t,r){var e,i=-1,o=n.length-r;for(t.lineStart();++i<o;)e=n[i],t.point(e[0],e[1],e[2]);t.lineEnd()}function R(n,t){var r=-1,e=n.length;for(t.polygonStart();++r<e;)z(n[r],t,1);t.polygonEnd()}var T,q,B,G,F,L=function(n,t){n&&O.hasOwnProperty(n.type)?O[n.type](n,t):C(n,t)},D=e(),W=e(),H={point:k,lineStart:k,lineEnd:k,polygonStart:function(){D.reset(),H.lineStart=I,H.lineEnd=J},polygonEnd:function(){var n=+D;W.add(n<0?s+n:n),this.lineStart=this.lineEnd=this.point=k},sphere:function(){W.add(s)}};function I(){H.point=U}function J(){X(T,q)}function U(n,t){H.point=X,T=n,q=t,B=n*=h,G=y(t=(t*=h)/2+f),F=M(t)}function X(n,t){t=(t*=h)/2+f;var r=(n*=h)-B,e=r>=0?1:-1,i=e*r,o=y(t),u=M(t),a=F*u,c=G*o+a*y(i),l=a*e*M(i);D.add(v(l,c)),B=n,G=o,F=u}var Y=function(n){return W.reset(),L(n,H),2*W};function Z(n){return[v(n[1],n[0]),N(n[2])]}function K(n){var t=n[0],r=n[1],e=y(r);return[e*y(t),e*M(t),M(r)]}function Q(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function V(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function $(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function nn(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function tn(n){var t=_(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}var rn,en,on,un,an,cn,ln,fn,sn,pn,hn=e(),dn={point:gn,lineStart:yn,lineEnd:Sn,polygonStart:function(){dn.point=En,dn.lineStart=mn,dn.lineEnd=wn,hn.reset(),H.polygonStart()},polygonEnd:function(){H.polygonEnd(),dn.point=gn,dn.lineStart=yn,dn.lineEnd=Sn,D<0?(rn=-(on=180),en=-(un=90)):hn>a?un=90:hn<-a&&(en=-90),pn[0]=rn,pn[1]=on}};function gn(n,t){sn.push(pn=[rn=n,on=n]),t<en&&(en=t),t>un&&(un=t)}function vn(n,t){var r=K([n*h,t*h]);if(fn){var e=V(fn,r),i=V([e[1],-e[0],0],e);tn(i),i=Z(i);var o,u=n-an,a=u>0?1:-1,c=i[0]*p*a,l=d(u)>180;l^(a*an<c&&c<a*n)?(o=i[1]*p)>un&&(un=o):l^(a*an<(c=(c+360)%360-180)&&c<a*n)?(o=-i[1]*p)<en&&(en=o):(t<en&&(en=t),t>un&&(un=t)),l?n<an?Mn(rn,n)>Mn(rn,on)&&(on=n):Mn(n,on)>Mn(rn,on)&&(rn=n):on>=rn?(n<rn&&(rn=n),n>on&&(on=n)):n>an?Mn(rn,n)>Mn(rn,on)&&(on=n):Mn(n,on)>Mn(rn,on)&&(rn=n)}else sn.push(pn=[rn=n,on=n]);t<en&&(en=t),t>un&&(un=t),fn=r,an=n}function yn(){dn.point=vn}function Sn(){pn[0]=rn,pn[1]=on,dn.point=gn,fn=null}function En(n,t){if(fn){var r=n-an;hn.add(d(r)>180?r+(r>0?360:-360):r)}else cn=n,ln=t;H.point(n,t),vn(n,t)}function mn(){H.lineStart()}function wn(){En(cn,ln),H.lineEnd(),d(hn)>a&&(rn=-(on=180)),pn[0]=rn,pn[1]=on,fn=null}function Mn(n,t){return(t-=n)<0?t+360:t}function xn(n,t){return n[0]-t[0]}function _n(n,t){return n[0]<=n[1]?n[0]<=t&&t<=n[1]:t<n[0]||n[1]<t}var bn,Pn,Nn,jn,kn,Cn,On,An,zn,Rn,Tn,qn,Bn,Gn,Fn,Ln,Dn=function(n){var t,r,e,i,o,u,a;if(un=on=-(rn=en=1/0),sn=[],L(n,dn),r=sn.length){for(sn.sort(xn),t=1,o=[e=sn[0]];t<r;++t)_n(e,(i=sn[t])[0])||_n(e,i[1])?(Mn(e[0],i[1])>Mn(e[0],e[1])&&(e[1]=i[1]),Mn(i[0],e[1])>Mn(e[0],e[1])&&(e[0]=i[0])):o.push(e=i);for(u=-1/0,t=0,e=o[r=o.length-1];t<=r;e=i,++t)i=o[t],(a=Mn(e[1],i[0]))>u&&(u=a,rn=i[0],on=e[1])}return sn=pn=null,rn===1/0||en===1/0?[[NaN,NaN],[NaN,NaN]]:[[rn,en],[on,un]]},Wn={sphere:k,point:Hn,lineStart:Jn,lineEnd:Yn,polygonStart:function(){Wn.lineStart=Zn,Wn.lineEnd=Kn},polygonEnd:function(){Wn.lineStart=Jn,Wn.lineEnd=Yn}};function Hn(n,t){n*=h;var r=y(t*=h);In(r*y(n),r*M(n),M(t))}function In(n,t,r){Nn+=(n-Nn)/++bn,jn+=(t-jn)/bn,kn+=(r-kn)/bn}function Jn(){Wn.point=Un}function Un(n,t){n*=h;var r=y(t*=h);Gn=r*y(n),Fn=r*M(n),Ln=M(t),Wn.point=Xn,In(Gn,Fn,Ln)}function Xn(n,t){n*=h;var r=y(t*=h),e=r*y(n),i=r*M(n),o=M(t),u=v(_((u=Fn*o-Ln*i)*u+(u=Ln*e-Gn*o)*u+(u=Gn*i-Fn*e)*u),Gn*e+Fn*i+Ln*o);Pn+=u,Cn+=u*(Gn+(Gn=e)),On+=u*(Fn+(Fn=i)),An+=u*(Ln+(Ln=o)),In(Gn,Fn,Ln)}function Yn(){Wn.point=Hn}function Zn(){Wn.point=Qn}function Kn(){Vn(qn,Bn),Wn.point=Hn}function Qn(n,t){qn=n,Bn=t,n*=h,t*=h,Wn.point=Vn;var r=y(t);Gn=r*y(n),Fn=r*M(n),Ln=M(t),In(Gn,Fn,Ln)}function Vn(n,t){n*=h;var r=y(t*=h),e=r*y(n),i=r*M(n),o=M(t),u=Fn*o-Ln*i,a=Ln*e-Gn*o,c=Gn*i-Fn*e,l=_(u*u+a*a+c*c),f=N(l),s=l&&-f/l;zn+=s*u,Rn+=s*a,Tn+=s*c,Pn+=f,Cn+=f*(Gn+(Gn=e)),On+=f*(Fn+(Fn=i)),An+=f*(Ln+(Ln=o)),In(Gn,Fn,Ln)}var $n=function(n){bn=Pn=Nn=jn=kn=Cn=On=An=zn=Rn=Tn=0,L(n,Wn);var t=zn,r=Rn,e=Tn,i=t*t+r*r+e*e;return i<1e-12&&(t=Cn,r=On,e=An,Pn<a&&(t=Nn,r=jn,e=kn),(i=t*t+r*r+e*e)<1e-12)?[NaN,NaN]:[v(r,t)*p,N(e/_(i))*p]},nt=function(n){return function(){return n}},tt=function(n,t){function r(r,e){return r=n(r,e),t(r[0],r[1])}return n.invert&&t.invert&&(r.invert=function(r,e){return(r=t.invert(r,e))&&n.invert(r[0],r[1])}),r};function rt(n,t){return[n>c?n-s:n<-c?n+s:n,t]}function et(n,t,r){return(n%=s)?t||r?tt(ot(n),ut(t,r)):ot(n):t||r?ut(t,r):rt}function it(n){return function(t,r){return[(t+=n)>c?t-s:t<-c?t+s:t,r]}}function ot(n){var t=it(n);return t.invert=it(-n),t}function ut(n,t){var r=y(n),e=M(n),i=y(t),o=M(t);function u(n,t){var u=y(t),a=y(n)*u,c=M(n)*u,l=M(t),f=l*r+a*e;return[v(c*i-f*o,a*r-l*e),N(f*i+c*o)]}return u.invert=function(n,t){var u=y(t),a=y(n)*u,c=M(n)*u,l=M(t),f=l*i-c*o;return[v(c*i+l*o,a*r+f*e),N(f*r-a*e)]},u}rt.invert=rt;var at=function(n){function t(t){return(t=n(t[0]*h,t[1]*h))[0]*=p,t[1]*=p,t}return n=et(n[0]*h,n[1]*h,n.length>2?n[2]*h:0),t.invert=function(t){return(t=n.invert(t[0]*h,t[1]*h))[0]*=p,t[1]*=p,t},t};function ct(n,t,r,e,i,o){if(r){var u=y(t),a=M(t),c=e*r;null==i?(i=t+e*s,o=t-c/2):(i=lt(u,i),o=lt(u,o),(e>0?i<o:i>o)&&(i+=e*s));for(var l,f=i;e>0?f>o:f<o;f-=c)l=Z([u,-a*y(f),-a*M(f)]),n.point(l[0],l[1])}}function lt(n,t){(t=K(t))[0]-=n,tn(t);var r=P(-t[1]);return((-t[2]<0?-r:r)+s-a)%s}var ft=function(){var n,t,r=nt([0,0]),e=nt(90),i=nt(6),o={point:function(r,e){n.push(r=t(r,e)),r[0]*=p,r[1]*=p}};function u(){var u=r.apply(this,arguments),a=e.apply(this,arguments)*h,c=i.apply(this,arguments)*h;return n=[],t=et(-u[0]*h,-u[1]*h,0).invert,ct(o,a,c,1),u={type:"Polygon",coordinates:[n]},n=t=null,u}return u.center=function(n){return arguments.length?(r="function"==typeof n?n:nt([+n[0],+n[1]]),u):r},u.radius=function(n){return arguments.length?(e="function"==typeof n?n:nt(+n),u):e},u.precision=function(n){return arguments.length?(i="function"==typeof n?n:nt(+n),u):i},u},st=function(){var n,t=[];return{point:function(t,r){n.push([t,r])},lineStart:function(){t.push(n=[])},lineEnd:k,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var r=t;return t=[],n=null,r}}},pt=function(n,t){return d(n[0]-t[0])<a&&d(n[1]-t[1])<a};function ht(n,t,r,e){this.x=n,this.z=t,this.o=r,this.e=e,this.v=!1,this.n=this.p=null}var dt=function(n,t,r,e,i){var o,u,a=[],c=[];if(n.forEach(function(n){if(!((t=n.length-1)<=0)){var t,r,e=n[0],u=n[t];if(pt(e,u)){for(i.lineStart(),o=0;o<t;++o)i.point((e=n[o])[0],e[1]);i.lineEnd()}else a.push(r=new ht(e,n,null,!0)),c.push(r.o=new ht(e,null,r,!1)),a.push(r=new ht(u,n,null,!1)),c.push(r.o=new ht(u,null,r,!0))}}),a.length){for(c.sort(t),gt(a),gt(c),o=0,u=c.length;o<u;++o)c[o].e=r=!r;for(var l,f,s=a[0];;){for(var p=s,h=!0;p.v;)if((p=p.n)===s)return;l=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(h)for(o=0,u=l.length;o<u;++o)i.point((f=l[o])[0],f[1]);else e(p.x,p.n.x,1,i);p=p.n}else{if(h)for(l=p.p.z,o=l.length-1;o>=0;--o)i.point((f=l[o])[0],f[1]);else e(p.x,p.p.x,-1,i);p=p.p}l=(p=p.o).z,h=!h}while(!p.v);i.lineEnd()}}};function gt(n){if(t=n.length){for(var t,r,e=0,i=n[0];++e<t;)i.n=r=n[e],r.p=i,i=r;i.n=r=n[0],r.p=i}}var vt=e(),yt=function(n,t){var r=t[0],e=t[1],i=M(e),o=[M(r),-y(r),0],u=0,p=0;vt.reset(),1===i?e=l+a:-1===i&&(e=-l-a);for(var h=0,d=n.length;h<d;++h)if(S=(g=n[h]).length)for(var g,S,E=g[S-1],m=E[0],w=E[1]/2+f,x=M(w),_=y(w),b=0;b<S;++b,m=j,x=C,_=O,E=P){var P=g[b],j=P[0],k=P[1]/2+f,C=M(k),O=y(k),A=j-m,z=A>=0?1:-1,R=z*A,T=R>c,q=x*C;if(vt.add(v(q*z*M(R),_*O+q*y(R))),u+=T?A+z*s:A,T^m>=r^j>=r){var B=V(K(E),K(P));tn(B);var G=V(o,B);tn(G);var F=(T^A>=0?-1:1)*N(G[2]);(e>F||e===F&&(B[0]||B[1]))&&(p+=T^A>=0?1:-1)}}return(u<-a||u<a&&vt<-a)^1&p},St=function(n,t){return n<t?-1:n>t?1:n>=t?0:NaN};var Et,mt;1===(Et=St).length&&(mt=Et,Et=function(n,t){return St(mt(n),t)});var wt=Array.prototype,Mt=(wt.slice,wt.map,function(n,t,r){n=+n,t=+t,r=(i=arguments.length)<2?(t=n,n=0,1):i<3?1:+r;for(var e=-1,i=0|Math.max(0,Math.ceil((t-n)/r)),o=new Array(i);++e<i;)o[e]=n+e*r;return o});Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);var xt=function(n){for(var t,r,e,i=n.length,o=-1,u=0;++o<i;)u+=n[o].length;for(r=new Array(u);--i>=0;)for(t=(e=n[i]).length;--t>=0;)r[--u]=e[t];return r};var _t=function(n,t,r,e){return function(i){var o,u,a,c=t(i),l=st(),f=t(l),s=!1,p={point:h,lineStart:g,lineEnd:v,polygonStart:function(){p.point=y,p.lineStart=S,p.lineEnd=E,u=[],o=[]},polygonEnd:function(){p.point=h,p.lineStart=g,p.lineEnd=v,u=xt(u);var n=yt(o,e);u.length?(s||(i.polygonStart(),s=!0),dt(u,Pt,n,r,i)):n&&(s||(i.polygonStart(),s=!0),i.lineStart(),r(null,null,1,i),i.lineEnd()),s&&(i.polygonEnd(),s=!1),u=o=null},sphere:function(){i.polygonStart(),i.lineStart(),r(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(t,r){n(t,r)&&i.point(t,r)}function d(n,t){c.point(n,t)}function g(){p.point=d,c.lineStart()}function v(){p.point=h,c.lineEnd()}function y(n,t){a.push([n,t]),f.point(n,t)}function S(){f.lineStart(),a=[]}function E(){y(a[0][0],a[0][1]),f.lineEnd();var n,t,r,e,c=f.clean(),p=l.result(),h=p.length;if(a.pop(),o.push(a),a=null,h)if(1&c){if((t=(r=p[0]).length-1)>0){for(s||(i.polygonStart(),s=!0),i.lineStart(),n=0;n<t;++n)i.point((e=r[n])[0],e[1]);i.lineEnd()}}else h>1&&2&c&&p.push(p.pop().concat(p.shift())),u.push(p.filter(bt))}return p}};function bt(n){return n.length>1}function Pt(n,t){return((n=n.x)[0]<0?n[1]-l-a:l-n[1])-((t=t.x)[0]<0?t[1]-l-a:l-t[1])}var Nt=_t(function(){return!0},function(n){var t,r=NaN,e=NaN,i=NaN;return{lineStart:function(){n.lineStart(),t=1},point:function(o,u){var f=o>0?c:-c,s=d(o-r);d(s-c)<a?(n.point(r,e=(e+u)/2>0?l:-l),n.point(i,e),n.lineEnd(),n.lineStart(),n.point(f,e),n.point(o,e),t=0):i!==f&&s>=c&&(d(r-i)<a&&(r-=i*a),d(o-f)<a&&(o-=f*a),e=function(n,t,r,e){var i,o,u=M(n-r);return d(u)>a?g((M(t)*(o=y(e))*M(r)-M(e)*(i=y(t))*M(n))/(i*o*u)):(t+e)/2}(r,e,o,u),n.point(i,e),n.lineEnd(),n.lineStart(),n.point(f,e),t=0),n.point(r=o,e=u),i=f},lineEnd:function(){n.lineEnd(),r=e=NaN},clean:function(){return 2-t}}},function(n,t,r,e){var i;if(null==n)i=r*l,e.point(-c,i),e.point(0,i),e.point(c,i),e.point(c,0),e.point(c,-i),e.point(0,-i),e.point(-c,-i),e.point(-c,0),e.point(-c,i);else if(d(n[0]-t[0])>a){var o=n[0]<t[0]?c:-c;i=r*o/2,e.point(-o,i),e.point(0,i),e.point(o,i)}else e.point(t[0],t[1])},[-c,-l]);var jt=function(n){var t=y(n),r=6*h,e=t>0,i=d(t)>a;function o(n,r){return y(n)*y(r)>t}function u(n,r,e){var i=[1,0,0],o=V(K(n),K(r)),u=Q(o,o),l=o[0],f=u-l*l;if(!f)return!e&&n;var s=t*u/f,p=-t*l/f,h=V(i,o),g=nn(i,s);$(g,nn(o,p));var v=h,y=Q(g,v),S=Q(v,v),E=y*y-S*(Q(g,g)-1);if(!(E<0)){var m=_(E),w=nn(v,(-y-m)/S);if($(w,g),w=Z(w),!e)return w;var M,x=n[0],b=r[0],P=n[1],N=r[1];b<x&&(M=x,x=b,b=M);var j=b-x,k=d(j-c)<a;if(!k&&N<P&&(M=P,P=N,N=M),k||j<a?k?P+N>0^w[1]<(d(w[0]-x)<a?P:N):P<=w[1]&&w[1]<=N:j>c^(x<=w[0]&&w[0]<=b)){var C=nn(v,(-y+m)/S);return $(C,g),[w,Z(C)]}}}function l(t,r){var i=e?n:c-n,o=0;return t<-i?o|=1:t>i&&(o|=2),r<-i?o|=4:r>i&&(o|=8),o}return _t(o,function(n){var t,r,f,s,p;return{lineStart:function(){s=f=!1,p=1},point:function(h,d){var g,v=[h,d],y=o(h,d),S=e?y?0:l(h,d):y?l(h+(h<0?c:-c),d):0;if(!t&&(s=f=y)&&n.lineStart(),y!==f&&(!(g=u(t,v))||pt(t,g)||pt(v,g))&&(v[0]+=a,v[1]+=a,y=o(v[0],v[1])),y!==f)p=0,y?(n.lineStart(),g=u(v,t),n.point(g[0],g[1])):(g=u(t,v),n.point(g[0],g[1]),n.lineEnd()),t=g;else if(i&&t&&e^y){var E;S&r||!(E=u(v,t,!0))||(p=0,e?(n.lineStart(),n.point(E[0][0],E[0][1]),n.point(E[1][0],E[1][1]),n.lineEnd()):(n.point(E[1][0],E[1][1]),n.lineEnd(),n.lineStart(),n.point(E[0][0],E[0][1])))}!y||t&&pt(t,v)||n.point(v[0],v[1]),t=v,f=y,r=S},lineEnd:function(){f&&n.lineEnd(),t=null},clean:function(){return p|(s&&f)<<1}}},function(t,e,i,o){ct(o,n,r,i,t,e)},e?[0,-n]:[-c,n-c])},kt=function(n,t,r,e,i,o){var u,a=n[0],c=n[1],l=0,f=1,s=t[0]-a,p=t[1]-c;if(u=r-a,s||!(u>0)){if(u/=s,s<0){if(u<l)return;u<f&&(f=u)}else if(s>0){if(u>f)return;u>l&&(l=u)}if(u=i-a,s||!(u<0)){if(u/=s,s<0){if(u>f)return;u>l&&(l=u)}else if(s>0){if(u<l)return;u<f&&(f=u)}if(u=e-c,p||!(u>0)){if(u/=p,p<0){if(u<l)return;u<f&&(f=u)}else if(p>0){if(u>f)return;u>l&&(l=u)}if(u=o-c,p||!(u<0)){if(u/=p,p<0){if(u>f)return;u>l&&(l=u)}else if(p>0){if(u<l)return;u<f&&(f=u)}return l>0&&(n[0]=a+l*s,n[1]=c+l*p),f<1&&(t[0]=a+f*s,t[1]=c+f*p),!0}}}}},Ct=1e9,Ot=-Ct;function At(n,t,r,e){function i(i,o){return n<=i&&i<=r&&t<=o&&o<=e}function o(i,o,a,c){var f=0,s=0;if(null==i||(f=u(i,a))!==(s=u(o,a))||l(i,o)<0^a>0)do{c.point(0===f||3===f?n:r,f>1?e:t)}while((f=(f+a+4)%4)!==s);else c.point(o[0],o[1])}function u(e,i){return d(e[0]-n)<a?i>0?0:3:d(e[0]-r)<a?i>0?2:1:d(e[1]-t)<a?i>0?1:0:i>0?3:2}function c(n,t){return l(n.x,t.x)}function l(n,t){var r=u(n,1),e=u(t,1);return r!==e?r-e:0===r?t[1]-n[1]:1===r?n[0]-t[0]:2===r?n[1]-t[1]:t[0]-n[0]}return function(u){var a,l,f,s,p,h,d,g,v,y,S,E=u,m=st(),w={point:M,lineStart:function(){w.point=x,l&&l.push(f=[]);y=!0,v=!1,d=g=NaN},lineEnd:function(){a&&(x(s,p),h&&v&&m.rejoin(),a.push(m.result()));w.point=M,v&&E.lineEnd()},polygonStart:function(){E=m,a=[],l=[],S=!0},polygonEnd:function(){var t=function(){for(var t=0,r=0,i=l.length;r<i;++r)for(var o,u,a=l[r],c=1,f=a.length,s=a[0],p=s[0],h=s[1];c<f;++c)o=p,u=h,s=a[c],p=s[0],h=s[1],u<=e?h>e&&(p-o)*(e-u)>(h-u)*(n-o)&&++t:h<=e&&(p-o)*(e-u)<(h-u)*(n-o)&&--t;return t}(),r=S&&t,i=(a=xt(a)).length;(r||i)&&(u.polygonStart(),r&&(u.lineStart(),o(null,null,1,u),u.lineEnd()),i&&dt(a,c,t,o,u),u.polygonEnd());E=u,a=l=f=null}};function M(n,t){i(n,t)&&E.point(n,t)}function x(o,u){var a=i(o,u);if(l&&f.push([o,u]),y)s=o,p=u,h=a,y=!1,a&&(E.lineStart(),E.point(o,u));else if(a&&v)E.point(o,u);else{var c=[d=Math.max(Ot,Math.min(Ct,d)),g=Math.max(Ot,Math.min(Ct,g))],m=[o=Math.max(Ot,Math.min(Ct,o)),u=Math.max(Ot,Math.min(Ct,u))];kt(c,m,n,t,r,e)?(v||(E.lineStart(),E.point(c[0],c[1])),E.point(m[0],m[1]),a||E.lineEnd(),S=!1):a&&(E.lineStart(),E.point(o,u),S=!1)}d=o,g=u,v=a}return w}}var zt,Rt,Tt,qt=function(){var n,t,r,e=0,i=0,o=960,u=500;return r={stream:function(r){return n&&t===r?n:n=At(e,i,o,u)(t=r)},extent:function(a){return arguments.length?(e=+a[0][0],i=+a[0][1],o=+a[1][0],u=+a[1][1],n=t=null,r):[[e,i],[o,u]]}}},Bt=e(),Gt={sphere:k,point:k,lineStart:function(){Gt.point=Lt,Gt.lineEnd=Ft},lineEnd:k,polygonStart:k,polygonEnd:k};function Ft(){Gt.point=Gt.lineEnd=k}function Lt(n,t){zt=n*=h,Rt=M(t*=h),Tt=y(t),Gt.point=Dt}function Dt(n,t){n*=h;var r=M(t*=h),e=y(t),i=d(n-zt),o=y(i),u=e*M(i),a=Tt*r-Rt*e*o,c=Rt*r+Tt*e*o;Bt.add(v(_(u*u+a*a),c)),zt=n,Rt=r,Tt=e}var Wt=function(n){return Bt.reset(),L(n,Gt),+Bt},Ht=[null,null],It={type:"LineString",coordinates:Ht},Jt=function(n,t){return Ht[0]=n,Ht[1]=t,Wt(It)},Ut={Feature:function(n,t){return Yt(n.geometry,t)},FeatureCollection:function(n,t){for(var r=n.features,e=-1,i=r.length;++e<i;)if(Yt(r[e].geometry,t))return!0;return!1}},Xt={Sphere:function(){return!0},Point:function(n,t){return Zt(n.coordinates,t)},MultiPoint:function(n,t){for(var r=n.coordinates,e=-1,i=r.length;++e<i;)if(Zt(r[e],t))return!0;return!1},LineString:function(n,t){return Kt(n.coordinates,t)},MultiLineString:function(n,t){for(var r=n.coordinates,e=-1,i=r.length;++e<i;)if(Kt(r[e],t))return!0;return!1},Polygon:function(n,t){return Qt(n.coordinates,t)},MultiPolygon:function(n,t){for(var r=n.coordinates,e=-1,i=r.length;++e<i;)if(Qt(r[e],t))return!0;return!1},GeometryCollection:function(n,t){for(var r=n.geometries,e=-1,i=r.length;++e<i;)if(Yt(r[e],t))return!0;return!1}};function Yt(n,t){return!(!n||!Xt.hasOwnProperty(n.type))&&Xt[n.type](n,t)}function Zt(n,t){return 0===Jt(n,t)}function Kt(n,t){var r=Jt(n[0],n[1]);return Jt(n[0],t)+Jt(t,n[1])<=r+a}function Qt(n,t){return!!yt(n.map(Vt),$t(t))}function Vt(n){return(n=n.map($t)).pop(),n}function $t(n){return[n[0]*h,n[1]*h]}var nr=function(n,t){return(n&&Ut.hasOwnProperty(n.type)?Ut[n.type]:Yt)(n,t)};function tr(n,t,r){var e=Mt(n,t-a,r).concat(t);return function(n){return e.map(function(t){return[n,t]})}}function rr(n,t,r){var e=Mt(n,t-a,r).concat(t);return function(n){return e.map(function(t){return[t,n]})}}function er(){var n,t,r,e,i,o,u,c,l,f,s,p,h=10,g=h,v=90,y=360,E=2.5;function m(){return{type:"MultiLineString",coordinates:w()}}function w(){return Mt(S(e/v)*v,r,v).map(s).concat(Mt(S(c/y)*y,u,y).map(p)).concat(Mt(S(t/h)*h,n,h).filter(function(n){return d(n%v)>a}).map(l)).concat(Mt(S(o/g)*g,i,g).filter(function(n){return d(n%y)>a}).map(f))}return m.lines=function(){return w().map(function(n){return{type:"LineString",coordinates:n}})},m.outline=function(){return{type:"Polygon",coordinates:[s(e).concat(p(u).slice(1),s(r).reverse().slice(1),p(c).reverse().slice(1))]}},m.extent=function(n){return arguments.length?m.extentMajor(n).extentMinor(n):m.extentMinor()},m.extentMajor=function(n){return arguments.length?(e=+n[0][0],r=+n[1][0],c=+n[0][1],u=+n[1][1],e>r&&(n=e,e=r,r=n),c>u&&(n=c,c=u,u=n),m.precision(E)):[[e,c],[r,u]]},m.extentMinor=function(r){return arguments.length?(t=+r[0][0],n=+r[1][0],o=+r[0][1],i=+r[1][1],t>n&&(r=t,t=n,n=r),o>i&&(r=o,o=i,i=r),m.precision(E)):[[t,o],[n,i]]},m.step=function(n){return arguments.length?m.stepMajor(n).stepMinor(n):m.stepMinor()},m.stepMajor=function(n){return arguments.length?(v=+n[0],y=+n[1],m):[v,y]},m.stepMinor=function(n){return arguments.length?(h=+n[0],g=+n[1],m):[h,g]},m.precision=function(a){return arguments.length?(E=+a,l=tr(o,i,90),f=rr(t,n,E),s=tr(c,u,90),p=rr(e,r,E),m):E},m.extentMajor([[-180,-90+a],[180,90-a]]).extentMinor([[-180,-80-a],[180,80+a]])}function ir(){return er()()}var or,ur,ar,cr,lr=function(n,t){var r=n[0]*h,e=n[1]*h,i=t[0]*h,o=t[1]*h,u=y(e),a=M(e),c=y(o),l=M(o),f=u*y(r),s=u*M(r),d=c*y(i),g=c*M(i),S=2*N(_(j(o-e)+u*c*j(i-r))),E=M(S),m=S?function(n){var t=M(n*=S)/E,r=M(S-n)/E,e=r*f+t*d,i=r*s+t*g,o=r*a+t*l;return[v(i,e)*p,v(o,_(e*e+i*i))*p]}:function(){return[r*p,e*p]};return m.distance=S,m},fr=function(n){return n},sr=e(),pr=e(),hr={point:k,lineStart:k,lineEnd:k,polygonStart:function(){hr.lineStart=dr,hr.lineEnd=yr},polygonEnd:function(){hr.lineStart=hr.lineEnd=hr.point=k,sr.add(d(pr)),pr.reset()},result:function(){var n=sr/2;return sr.reset(),n}};function dr(){hr.point=gr}function gr(n,t){hr.point=vr,or=ar=n,ur=cr=t}function vr(n,t){pr.add(cr*n-ar*t),ar=n,cr=t}function yr(){vr(or,ur)}var Sr=hr,Er=1/0,mr=Er,wr=-Er,Mr=wr;var xr,_r,br,Pr,Nr={point:function(n,t){n<Er&&(Er=n);n>wr&&(wr=n);t<mr&&(mr=t);t>Mr&&(Mr=t)},lineStart:k,lineEnd:k,polygonStart:k,polygonEnd:k,result:function(){var n=[[Er,mr],[wr,Mr]];return wr=Mr=-(mr=Er=1/0),n}},jr=0,kr=0,Cr=0,Or=0,Ar=0,zr=0,Rr=0,Tr=0,qr=0,Br={point:Gr,lineStart:Fr,lineEnd:Wr,polygonStart:function(){Br.lineStart=Hr,Br.lineEnd=Ir},polygonEnd:function(){Br.point=Gr,Br.lineStart=Fr,Br.lineEnd=Wr},result:function(){var n=qr?[Rr/qr,Tr/qr]:zr?[Or/zr,Ar/zr]:Cr?[jr/Cr,kr/Cr]:[NaN,NaN];return jr=kr=Cr=Or=Ar=zr=Rr=Tr=qr=0,n}};function Gr(n,t){jr+=n,kr+=t,++Cr}function Fr(){Br.point=Lr}function Lr(n,t){Br.point=Dr,Gr(br=n,Pr=t)}function Dr(n,t){var r=n-br,e=t-Pr,i=_(r*r+e*e);Or+=i*(br+n)/2,Ar+=i*(Pr+t)/2,zr+=i,Gr(br=n,Pr=t)}function Wr(){Br.point=Gr}function Hr(){Br.point=Jr}function Ir(){Ur(xr,_r)}function Jr(n,t){Br.point=Ur,Gr(xr=br=n,_r=Pr=t)}function Ur(n,t){var r=n-br,e=t-Pr,i=_(r*r+e*e);Or+=i*(br+n)/2,Ar+=i*(Pr+t)/2,zr+=i,Rr+=(i=Pr*n-br*t)*(br+n),Tr+=i*(Pr+t),qr+=3*i,Gr(br=n,Pr=t)}var Xr=Br;function Yr(n){this._context=n}Yr.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(n,t){switch(this._point){case 0:this._context.moveTo(n,t),this._point=1;break;case 1:this._context.lineTo(n,t);break;default:this._context.moveTo(n+this._radius,t),this._context.arc(n,t,this._radius,0,s)}},result:k};var Zr,Kr,Qr,Vr,$r,ne=e(),te={point:k,lineStart:function(){te.point=re},lineEnd:function(){Zr&&ee(Kr,Qr),te.point=k},polygonStart:function(){Zr=!0},polygonEnd:function(){Zr=null},result:function(){var n=+ne;return ne.reset(),n}};function re(n,t){te.point=ee,Kr=Vr=n,Qr=$r=t}function ee(n,t){Vr-=n,$r-=t,ne.add(_(Vr*Vr+$r*$r)),Vr=n,$r=t}var ie=te;function oe(){this._string=[]}function ue(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}oe.prototype={_radius:4.5,_circle:ue(4.5),pointRadius:function(n){return(n=+n)!==this._radius&&(this._radius=n,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(n,t){switch(this._point){case 0:this._string.push("M",n,",",t),this._point=1;break;case 1:this._string.push("L",n,",",t);break;default:null==this._circle&&(this._circle=ue(this._radius)),this._string.push("M",n,",",t,this._circle)}},result:function(){if(this._string.length){var n=this._string.join("");return this._string=[],n}return null}};var ae=function(n,t){var r,e,i=4.5;function o(n){return n&&("function"==typeof i&&e.pointRadius(+i.apply(this,arguments)),L(n,r(e))),e.result()}return o.area=function(n){return L(n,r(Sr)),Sr.result()},o.measure=function(n){return L(n,r(ie)),ie.result()},o.bounds=function(n){return L(n,r(Nr)),Nr.result()},o.centroid=function(n){return L(n,r(Xr)),Xr.result()},o.projection=function(t){return arguments.length?(r=null==t?(n=null,fr):(n=t).stream,o):n},o.context=function(n){return arguments.length?(e=null==n?(t=null,new oe):new Yr(t=n),"function"!=typeof i&&e.pointRadius(i),o):t},o.pointRadius=function(n){return arguments.length?(i="function"==typeof n?n:(e.pointRadius(+n),+n),o):i},o.projection(n).context(t)},ce=function(n){return{stream:le(n)}};function le(n){return function(t){var r=new fe;for(var e in n)r[e]=n[e];return r.stream=t,r}}function fe(){}function se(n,t,r){var e=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),null!=e&&n.clipExtent(null),L(r,n.stream(Nr)),t(Nr.result()),null!=e&&n.clipExtent(e),n}function pe(n,t,r){return se(n,function(r){var e=t[1][0]-t[0][0],i=t[1][1]-t[0][1],o=Math.min(e/(r[1][0]-r[0][0]),i/(r[1][1]-r[0][1])),u=+t[0][0]+(e-o*(r[1][0]+r[0][0]))/2,a=+t[0][1]+(i-o*(r[1][1]+r[0][1]))/2;n.scale(150*o).translate([u,a])},r)}function he(n,t,r){return pe(n,[[0,0],t],r)}function de(n,t,r){return se(n,function(r){var e=+t,i=e/(r[1][0]-r[0][0]),o=(e-i*(r[1][0]+r[0][0]))/2,u=-i*r[0][1];n.scale(150*i).translate([o,u])},r)}function ge(n,t,r){return se(n,function(r){var e=+t,i=e/(r[1][1]-r[0][1]),o=-i*r[0][0],u=(e-i*(r[1][1]+r[0][1]))/2;n.scale(150*i).translate([o,u])},r)}fe.prototype={constructor:fe,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var ve=16,ye=y(30*h),Se=function(n,t){return+t?function(n,t){function r(e,i,o,u,c,l,f,s,p,h,g,y,S,E){var m=f-e,w=s-i,M=m*m+w*w;if(M>4*t&&S--){var x=u+h,b=c+g,P=l+y,j=_(x*x+b*b+P*P),k=N(P/=j),C=d(d(P)-1)<a||d(o-p)<a?(o+p)/2:v(b,x),O=n(C,k),A=O[0],z=O[1],R=A-e,T=z-i,q=w*R-m*T;(q*q/M>t||d((m*R+w*T)/M-.5)>.3||u*h+c*g+l*y<ye)&&(r(e,i,o,u,c,l,A,z,C,x/=j,b/=j,P,S,E),E.point(A,z),r(A,z,C,x,b,P,f,s,p,h,g,y,S,E))}}return function(t){var e,i,o,u,a,c,l,f,s,p,h,d,g={point:v,lineStart:y,lineEnd:E,polygonStart:function(){t.polygonStart(),g.lineStart=m},polygonEnd:function(){t.polygonEnd(),g.lineStart=y}};function v(r,e){r=n(r,e),t.point(r[0],r[1])}function y(){f=NaN,g.point=S,t.lineStart()}function S(e,i){var o=K([e,i]),u=n(e,i);r(f,s,l,p,h,d,f=u[0],s=u[1],l=e,p=o[0],h=o[1],d=o[2],ve,t),t.point(f,s)}function E(){g.point=v,t.lineEnd()}function m(){y(),g.point=w,g.lineEnd=M}function w(n,t){S(e=n,t),i=f,o=s,u=p,a=h,c=d,g.point=S}function M(){r(f,s,l,p,h,d,i,o,e,u,a,c,ve,t),g.lineEnd=E,E()}return g}}(n,t):function(n){return le({point:function(t,r){t=n(t,r),this.stream.point(t[0],t[1])}})}(n)};var Ee=le({point:function(n,t){this.stream.point(n*h,t*h)}});function me(n,t,r,e){var i=y(e),o=M(e),u=i*n,a=o*n,c=i/n,l=o/n,f=(o*r-i*t)/n,s=(o*t+i*r)/n;function p(n,e){return[u*n-a*e+t,r-a*n-u*e]}return p.invert=function(n,t){return[c*n-l*t+f,s-l*n-c*t]},p}function we(n){return Me(function(){return n})()}function Me(n){var t,r,e,i,o,u,a,c,l,f,s=150,d=480,g=250,v=0,y=0,S=0,E=0,m=0,w=0,M=null,x=Nt,b=null,P=fr,N=.5;function j(n){return c(n[0]*h,n[1]*h)}function k(n){return(n=c.invert(n[0],n[1]))&&[n[0]*p,n[1]*p]}function C(){var n=me(s,0,0,w).apply(null,t(v,y)),e=(w?me:function(n,t,r){function e(e,i){return[t+n*e,r-n*i]}return e.invert=function(e,i){return[(e-t)/n,(r-i)/n]},e})(s,d-n[0],g-n[1],w);return r=et(S,E,m),a=tt(t,e),c=tt(r,a),u=Se(a,N),O()}function O(){return l=f=null,j}return j.stream=function(n){return l&&f===n?l:l=Ee(function(n){return le({point:function(t,r){var e=n(t,r);return this.stream.point(e[0],e[1])}})}(r)(x(u(P(f=n)))))},j.preclip=function(n){return arguments.length?(x=n,M=void 0,O()):x},j.postclip=function(n){return arguments.length?(P=n,b=e=i=o=null,O()):P},j.clipAngle=function(n){return arguments.length?(x=+n?jt(M=n*h):(M=null,Nt),O()):M*p},j.clipExtent=function(n){return arguments.length?(P=null==n?(b=e=i=o=null,fr):At(b=+n[0][0],e=+n[0][1],i=+n[1][0],o=+n[1][1]),O()):null==b?null:[[b,e],[i,o]]},j.scale=function(n){return arguments.length?(s=+n,C()):s},j.translate=function(n){return arguments.length?(d=+n[0],g=+n[1],C()):[d,g]},j.center=function(n){return arguments.length?(v=n[0]%360*h,y=n[1]%360*h,C()):[v*p,y*p]},j.rotate=function(n){return arguments.length?(S=n[0]%360*h,E=n[1]%360*h,m=n.length>2?n[2]%360*h:0,C()):[S*p,E*p,m*p]},j.angle=function(n){return arguments.length?(w=n%360*h,C()):w*p},j.precision=function(n){return arguments.length?(u=Se(a,N=n*n),O()):_(N)},j.fitExtent=function(n,t){return pe(j,n,t)},j.fitSize=function(n,t){return he(j,n,t)},j.fitWidth=function(n,t){return de(j,n,t)},j.fitHeight=function(n,t){return ge(j,n,t)},function(){return t=n.apply(this,arguments),j.invert=t.invert&&k,C()}}function xe(n){var t=0,r=c/3,e=Me(n),i=e(t,r);return i.parallels=function(n){return arguments.length?e(t=n[0]*h,r=n[1]*h):[t*p,r*p]},i}function _e(n,t){var r=M(n),e=(r+M(t))/2;if(d(e)<a)return function(n){var t=y(n);function r(n,r){return[n*t,M(r)/t]}return r.invert=function(n,r){return[n/t,N(r*t)]},r}(n);var i=1+r*(2*e-r),o=_(i)/e;function u(n,t){var r=_(i-2*e*M(t))/e;return[r*M(n*=e),o-r*y(n)]}return u.invert=function(n,t){var r=o-t;return[v(n,d(r))/e*x(r),N((i-(n*n+r*r)*e*e)/(2*e))]},u}var be=function(){return xe(_e).scale(155.424).center([0,33.6442])},Pe=function(){return be().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])};var Ne=function(){var n,t,r,e,i,o,u=Pe(),c=be().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=be().rotate([157,0]).center([-3,19.9]).parallels([8,18]),f={point:function(n,t){o=[n,t]}};function s(n){var t=n[0],u=n[1];return o=null,r.point(t,u),o||(e.point(t,u),o)||(i.point(t,u),o)}function p(){return n=t=null,s}return s.invert=function(n){var t=u.scale(),r=u.translate(),e=(n[0]-r[0])/t,i=(n[1]-r[1])/t;return(i>=.12&&i<.234&&e>=-.425&&e<-.214?c:i>=.166&&i<.234&&e>=-.214&&e<-.115?l:u).invert(n)},s.stream=function(r){return n&&t===r?n:(e=[u.stream(t=r),c.stream(r),l.stream(r)],i=e.length,n={point:function(n,t){for(var r=-1;++r<i;)e[r].point(n,t)},sphere:function(){for(var n=-1;++n<i;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<i;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<i;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<i;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<i;)e[n].polygonEnd()}});var e,i},s.precision=function(n){return arguments.length?(u.precision(n),c.precision(n),l.precision(n),p()):u.precision()},s.scale=function(n){return arguments.length?(u.scale(n),c.scale(.35*n),l.scale(n),s.translate(u.translate())):u.scale()},s.translate=function(n){if(!arguments.length)return u.translate();var t=u.scale(),o=+n[0],s=+n[1];return r=u.translate(n).clipExtent([[o-.455*t,s-.238*t],[o+.455*t,s+.238*t]]).stream(f),e=c.translate([o-.307*t,s+.201*t]).clipExtent([[o-.425*t+a,s+.12*t+a],[o-.214*t-a,s+.234*t-a]]).stream(f),i=l.translate([o-.205*t,s+.212*t]).clipExtent([[o-.214*t+a,s+.166*t+a],[o-.115*t-a,s+.234*t-a]]).stream(f),p()},s.fitExtent=function(n,t){return pe(s,n,t)},s.fitSize=function(n,t){return he(s,n,t)},s.fitWidth=function(n,t){return de(s,n,t)},s.fitHeight=function(n,t){return ge(s,n,t)},s.scale(1070)};function je(n){return function(t,r){var e=y(t),i=y(r),o=n(e*i);return[o*i*M(t),o*M(r)]}}function ke(n){return function(t,r){var e=_(t*t+r*r),i=n(e),o=M(i),u=y(i);return[v(t*o,e*u),N(e&&r*o/e)]}}var Ce=je(function(n){return _(2/(1+n))});Ce.invert=ke(function(n){return 2*N(n/2)});var Oe=function(){return we(Ce).scale(124.75).clipAngle(179.999)},Ae=je(function(n){return(n=P(n))&&n/M(n)});Ae.invert=ke(function(n){return n});var ze=function(){return we(Ae).scale(79.4188).clipAngle(179.999)};function Re(n,t){return[n,m(b((l+t)/2))]}Re.invert=function(n,t){return[n,2*g(E(t))-l]};var Te=function(){return qe(Re).scale(961/s)};function qe(n){var t,r,e,i=we(n),o=i.center,u=i.scale,a=i.translate,l=i.clipExtent,f=null;function s(){var o=c*u(),a=i(at(i.rotate()).invert([0,0]));return l(null==f?[[a[0]-o,a[1]-o],[a[0]+o,a[1]+o]]:n===Re?[[Math.max(a[0]-o,f),t],[Math.min(a[0]+o,r),e]]:[[f,Math.max(a[1]-o,t)],[r,Math.min(a[1]+o,e)]])}return i.scale=function(n){return arguments.length?(u(n),s()):u()},i.translate=function(n){return arguments.length?(a(n),s()):a()},i.center=function(n){return arguments.length?(o(n),s()):o()},i.clipExtent=function(n){return arguments.length?(null==n?f=t=r=e=null:(f=+n[0][0],t=+n[0][1],r=+n[1][0],e=+n[1][1]),s()):null==f?null:[[f,t],[r,e]]},s()}function Be(n){return b((l+n)/2)}function Ge(n,t){var r=y(n),e=n===t?M(n):m(r/y(t))/m(Be(t)/Be(n)),i=r*w(Be(n),e)/e;if(!e)return Re;function o(n,t){i>0?t<-l+a&&(t=-l+a):t>l-a&&(t=l-a);var r=i/w(Be(t),e);return[r*M(e*n),i-r*y(e*n)]}return o.invert=function(n,t){var r=i-t,o=x(e)*_(n*n+r*r);return[v(n,d(r))/e*x(r),2*g(w(i/o,1/e))-l]},o}var Fe=function(){return xe(Ge).scale(109.5).parallels([30,30])};function Le(n,t){return[n,t]}Le.invert=Le;var De=function(){return we(Le).scale(152.63)};function We(n,t){var r=y(n),e=n===t?M(n):(r-y(t))/(t-n),i=r/e+n;if(d(e)<a)return Le;function o(n,t){var r=i-t,o=e*n;return[r*M(o),i-r*y(o)]}return o.invert=function(n,t){var r=i-t;return[v(n,d(r))/e*x(r),i-x(e)*_(n*n+r*r)]},o}var He=function(){return xe(We).scale(131.154).center([0,13.9389])};function Ie(n,t){var r=y(t),e=y(n)*r;return[r*M(n)/e,M(t)/e]}Ie.invert=ke(g);var Je=function(){return we(Ie).scale(144.049).clipAngle(60)};function Ue(n,t,r,e){return 1===n&&1===t&&0===r&&0===e?fr:le({point:function(i,o){this.stream.point(i*n+r,o*t+e)}})}var Xe=function(){var n,t,r,e,i,o,u=1,a=0,c=0,l=1,f=1,s=fr,p=null,h=fr;function d(){return e=i=null,o}return o={stream:function(n){return e&&i===n?e:e=s(h(i=n))},postclip:function(e){return arguments.length?(h=e,p=n=t=r=null,d()):h},clipExtent:function(e){return arguments.length?(h=null==e?(p=n=t=r=null,fr):At(p=+e[0][0],n=+e[0][1],t=+e[1][0],r=+e[1][1]),d()):null==p?null:[[p,n],[t,r]]},scale:function(n){return arguments.length?(s=Ue((u=+n)*l,u*f,a,c),d()):u},translate:function(n){return arguments.length?(s=Ue(u*l,u*f,a=+n[0],c=+n[1]),d()):[a,c]},reflectX:function(n){return arguments.length?(s=Ue(u*(l=n?-1:1),u*f,a,c),d()):l<0},reflectY:function(n){return arguments.length?(s=Ue(u*l,u*(f=n?-1:1),a,c),d()):f<0},fitExtent:function(n,t){return pe(o,n,t)},fitSize:function(n,t){return he(o,n,t)},fitWidth:function(n,t){return de(o,n,t)},fitHeight:function(n,t){return ge(o,n,t)}}};function Ye(n,t){var r=t*t,e=r*r;return[n*(.8707-.131979*r+e*(e*(.003971*r-.001529*e)-.013791)),t*(1.007226+r*(.015085+e*(.028874*r-.044475-.005916*e)))]}Ye.invert=function(n,t){var r,e=t,i=25;do{var o=e*e,u=o*o;e-=r=(e*(1.007226+o*(.015085+u*(.028874*o-.044475-.005916*u)))-t)/(1.007226+o*(.045255+u*(.259866*o-.311325-.005916*11*u)))}while(d(r)>a&&--i>0);return[n/(.8707+(o=e*e)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),e]};var Ze=function(){return we(Ye).scale(175.295)};function Ke(n,t){return[y(t)*M(n),M(t)]}Ke.invert=ke(N);var Qe=function(){return we(Ke).scale(249.5).clipAngle(90+a)};function Ve(n,t){var r=y(t),e=1+y(n)*r;return[r*M(n)/e,M(t)/e]}Ve.invert=ke(function(n){return 2*g(n)});var $e=function(){return we(Ve).scale(250).clipAngle(142)};function ni(n,t){return[m(b((l+t)/2)),-n]}ni.invert=function(n,t){return[-t,2*g(E(n))-l]};var ti=function(){var n=qe(ni),t=n.center,r=n.rotate;return n.center=function(n){return arguments.length?t([-n[1],n[0]]):[(n=t())[1],-n[0]]},n.rotate=function(n){return arguments.length?r([n[0],n[1],n.length>2?n[2]+90:90]):[(n=r())[0],n[1],n[2]-90]},r([0,0,90]).scale(159.155)};r.d(t,"geoArea",function(){return Y}),r.d(t,"geoBounds",function(){return Dn}),r.d(t,"geoCentroid",function(){return $n}),r.d(t,"geoCircle",function(){return ft}),r.d(t,"geoClipAntimeridian",function(){return Nt}),r.d(t,"geoClipCircle",function(){return jt}),r.d(t,"geoClipExtent",function(){return qt}),r.d(t,"geoClipRectangle",function(){return At}),r.d(t,"geoContains",function(){return nr}),r.d(t,"geoDistance",function(){return Jt}),r.d(t,"geoGraticule",function(){return er}),r.d(t,"geoGraticule10",function(){return ir}),r.d(t,"geoInterpolate",function(){return lr}),r.d(t,"geoLength",function(){return Wt}),r.d(t,"geoPath",function(){return ae}),r.d(t,"geoAlbers",function(){return Pe}),r.d(t,"geoAlbersUsa",function(){return Ne}),r.d(t,"geoAzimuthalEqualArea",function(){return Oe}),r.d(t,"geoAzimuthalEqualAreaRaw",function(){return Ce}),r.d(t,"geoAzimuthalEquidistant",function(){return ze}),r.d(t,"geoAzimuthalEquidistantRaw",function(){return Ae}),r.d(t,"geoConicConformal",function(){return Fe}),r.d(t,"geoConicConformalRaw",function(){return Ge}),r.d(t,"geoConicEqualArea",function(){return be}),r.d(t,"geoConicEqualAreaRaw",function(){return _e}),r.d(t,"geoConicEquidistant",function(){return He}),r.d(t,"geoConicEquidistantRaw",function(){return We}),r.d(t,"geoEquirectangular",function(){return De}),r.d(t,"geoEquirectangularRaw",function(){return Le}),r.d(t,"geoGnomonic",function(){return Je}),r.d(t,"geoGnomonicRaw",function(){return Ie}),r.d(t,"geoIdentity",function(){return Xe}),r.d(t,"geoProjection",function(){return we}),r.d(t,"geoProjectionMutator",function(){return Me}),r.d(t,"geoMercator",function(){return Te}),r.d(t,"geoMercatorRaw",function(){return Re}),r.d(t,"geoNaturalEarth1",function(){return Ze}),r.d(t,"geoNaturalEarth1Raw",function(){return Ye}),r.d(t,"geoOrthographic",function(){return Qe}),r.d(t,"geoOrthographicRaw",function(){return Ke}),r.d(t,"geoStereographic",function(){return $e}),r.d(t,"geoStereographicRaw",function(){return Ve}),r.d(t,"geoTransverseMercator",function(){return ti}),r.d(t,"geoTransverseMercatorRaw",function(){return ni}),r.d(t,"geoRotation",function(){return at}),r.d(t,"geoStream",function(){return L}),r.d(t,"geoTransform",function(){return ce})},function(n,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={type:"geo-json",datatype:["geo-json"],orientation:"2d",name:"GeoJSON",availableOptions:["projecton","labelPosition","labelColor","labelTextOpacity","labelBackgroundOpacity","trackBorderWidth","trackBorderColor","rectangleDomainFillColor","rectangleDomainStrokeColor","rectangleDomainOpacity","rectanlgeMinSize","polygonMinBoundingSize"],defaultOptions:{projecton:"mercator",labelColor:"black",labelPosition:"hidden",trackBorderWidth:0,trackBorderColor:"black",rectangleDomainFillColor:"grey",rectangleDomainStrokeColor:"black",rectangleDomainOpacity:.6,rectanlgeMinSize:1,polygonMinBoundingSize:4}}},function(n,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=function(){function n(n,t){for(var r=0;r<t.length;r++){var e=t[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}return function(t,r,e){return r&&n(t.prototype,r),e&&n(t,e),t}}(),i=r(0);t.default=function(n){for(var t=arguments.length,r=Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];if(!new.target)throw new Error('Uncaught TypeError: Class constructor cannot be invoked without "new"');var u=function(t){function r(n,t,e,o,u){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var a=function(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,n,e,o,t.options,u));switch(a.options.projection){case"mercator":default:a.projection=(0,i.geoMercator)()}return a.updateProjection(),a}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}(r,n),e(r,[{key:"prepAnnotation",value:function(n,t,r,e,i,o,u){return{graphics:n,uid:t,annotation:{x:r,y:e,width:i,height:o,geometry:u.geometry},dataPos:[u.xStart,u.xEnd,u.yStart,u.yEnd],importance:u.importance,info:u.properties}}},{key:"drawAnnotation",value:function(n){var t=n.graphics,r=n.uid,e=n.annotation,i=n.dataPos,o=n.importance,u=n.info;if((e.width<this.options.polygonMinBoundingSize||e.height<this.options.polygonMinBoundingSize)&&(e.geometry.type="rect"),this.options.minSquareSize&&(e.width<this.options.minSquareSize||e.height<this.options.minSquareSize)){var a=this.options.minSquareSize/2;e.x-=a,e.y-=a,e.width=this.options.minSquareSize,e.height=this.options.minSquareSize}switch(e.geometry.type){case"Polygon":this.drawPolygon(t,e.geometry.coordinates);break;default:this.drawRect(t,e.x,e.y,e.width,e.height)}this.publish("annotationDrawn",{trackUuids:this.uuid,annotationUuid:r,viewPos:[e.x,e.y,e.width,e.height],dataPos:i,importance:o,info:u}),this.drawnAnnotations[r]=e}},{key:"drawRect",value:function(n,t,r,e,i){n.drawRect(t,r,e,i)}},{key:"drawPolygon",value:function(n,t){var r=this,e=t.map(function(n){return n.reduce(function(n,t){return n.concat(r.projection(t))},[])});n.drawPolygon(e.shift()),e.forEach(function(t){n.drawPolygon(t),n.addHole(t)}),e.forEach(function(t){n.endFill(),n.drawPolygon(t)}),this.setFill(n)}},{key:"updateProjection",value:function(){this.projection.scale((this._xScale(180)-this._xScale(-180))/2/Math.PI).translate([this._xScale(0),this._yScale(0)])}},{key:"zoomed",value:function(n,t){this.xScale(n),this.yScale(t),this.updateProjection(),this.refreshTiles(),this.draw()}}]),r}();return new(Function.prototype.bind.apply(u,[null].concat(r)))}},function(n,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),window.higlassTracks=window.higlassTracks||{},window.higlassTracksByType=window.higlassTracksByType||{};t.default=function(n){window.higlassTracks[n.name]=n,window.higlassTracksByType[n.config.type]=n}},function(n,t,r){"use strict";var e=u(r(3)),i=u(r(2)),o=u(r(1));function u(n){return n&&n.__esModule?n:{default:n}}(0,e.default)({name:"GeoJsonTrack",track:i.default,extends:"Annotations2dTrack",config:o.default})}])});